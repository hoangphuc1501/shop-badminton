extends ../../layouts/default.pug
include ../../mixins/box-filter.pug
block main 
    .main
        h2
            .title-page
                | Danh sách sản phẩm 
        .card.mb-3
            .card-header 
                h3
                    | Bộ lọc và tìm kiếm
            .card-body
                .row
                    .col-2
                        +box-filter([
                            {
                                label: "Tất cả",
                                value: ""
                            },
                            {
                                label: "Hoạt động",
                                value: "active"
                            },
                            {
                                label: "Dừng hoạt động",
                                value: "inactive"
                            }
                        ])
                    .col-2
                        select(class="form-control" sort-select)
                            option(value="position-desc") Vị trí giảm dần
                            option(value="position-asc") Vị trí tăng dần
                            option(value="price-desc") Giá giảm dần
                            option(value="price-asc") Giá tăng dần
                            option(value="title-desc") Tiêu đề từ Z đến A
                            option(value="title-asc") Tiêu đề từ A đến Z
                    .col-2
                        select(class="form-control" sort-select)
                            option(value="position-desc") Vị trí giảm dần
                            option(value="position-asc") Vị trí tăng dần
                            option(value="price-desc") Giá giảm dần
                            option(value="price-asc") Giá tăng dần
                            option(value="title-desc") Tiêu đề từ Z đến A
                            option(value="title-asc") Tiêu đề từ A đến Z
                    .col-3
                        include ../../partials/box-search.pug
                    .col-3 
                        form(
                            form-change-multi
                            data-path=`/${prefixAdmin}/products/change-multi`
                        )
                            .input-group
                                +box-filter([
                                    {
                                        label: "Hoạt động",
                                        value: "active"
                                    },
                                    {
                                        label: "Dừng hoạt động",
                                        value: "inactive"
                                    },
                                    {
                                        label: "Xóa",
                                        value: "delete"
                                    }
                                ])
                                .input-group-append
                                    button(
                                    class="btn btn-main-color"
                                    type="submit"
                                    ) Áp dụng
                    
        .card 
            .card-header 
                h3
                    | Danh sách sản phẩm
            .card-body
                table.table.table-hover.table-sm
                    thead
                        tr
                            th
                            th STT
                            th Hình ảnh
                            th Tên sản phẩm
                            th Giá
                            th Vị trí
                            th Trạng thái
                            th Hành động
                    tbody
                        
                        each item, index in products
                            tr 
                                td
                                    input(
                                    type="checkbox"
                                    input-change=item.id
                                    )
                                td #{limitItem*(currentPage - 1) + index + 1}
                                td
                                    img(
                                        src=item.thumbnail
                                        alt=item.title
                                        width="100px"
                                        height="auto"
                                    )
                                td 
                                    a(class="a-title-link"
                                        href=`/${prefixAdmin}/products/detail/${item.id}`
                                        ) #{item.title} 
                                td #{toLocaleString(item.price)} đ
                                td
                                    input(
                                    type="number"
                                    value=item.position
                                    item-id=item.id
                                    data-path=`/${prefixAdmin}/products/change-position`
                                    input-position
                                    style="width: 60px;"
                                    )
                                td
                                    if (item.status == "active")
                                        button(
                                            item-id=item.id
                                            button-change-status="inactive"
                                            data-path=`/${prefixAdmin}/products/change-status`
                                            class="btn-status bg-success"
                                        ) Hoạt động
                                    else if (item.status == "inactive")
                                        button(
                                            item-id=item.id
                                            button-change-status="active"
                                            data-path=`/${prefixAdmin}/products/change-status`
                                            class="btn-status bg-danger"
                                        ) Dừng hoạt động 
                                td
                                    a(href=`/${prefixAdmin}/products/edit/${item.id}` 
                                        class="btn btn-warning btn-sm me-1"
                                        item-id=item.id
                                        button-edit
                                        data-path=`/${prefixAdmin}/products/edit`
                                        ) Sửa
                                    button(
                                        class="btn btn-danger btn-sm"
                                        item-id=item.id
                                        button-delete
                                        data-path=`/${prefixAdmin}/products/delete`
                                    ) Xóa  

            .page-panigation
                nav(class="" aria-label="Page navigation example")
                    ul(class="pagination")
                        if(currentPage > 1)
                            li(class="page-item")
                                button(class="page-link" button-pagination=currentPage-1) &laquo;
                        - for (var i = 1; i <= totalPage; i++)
                            li(class="page-item")
                                button(class="page-link" button-pagination=i) #{i}
                        if(currentPage < totalPage)
                            li(class="page-item")
                                button(class="page-link" button-pagination=currentPage+1) &raquo;
